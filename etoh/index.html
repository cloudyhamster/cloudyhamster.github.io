<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EToH - Player Progression</title>
    <meta name="description" content="A data visualizer for the Roblox game Eternal Towers of Hell.">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8QHLDYH5ZY"></script>
    <script>
        if (localStorage.getItem('etoh_analytics_optout') !== 'true') {
            const script = document.createElement('script');
            script.async = true;
            script.src = "https://www.googletagmanager.com/gtag/js?id=G-8QHLDYH5ZY";
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-8QHLDYH5ZY');
        }
    </script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="icon" href="icon.jpg">
    <link rel="stylesheet" href="./css/style.css?v=1.9.1">
</head>
<body class="text-[#EAEAEA] antialiased bg-[#120E1C]">
    <div class="relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
        <header class="fixed top-0 left-0 right-0 z-50 w-full p-2 lg:p-3">
            <div class="glass-panel hidden lg:flex h-14 items-center justify-between rounded-lg pl-4 pr-2.5 mx-auto w-[70%]">
                <div class="flex items-center gap-3">
                    <div class="text-[#BE00FF] size-5">
                        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M39.5563 34.1455V13.8546C39.5563 15.708 36.8773 17.3437 32.7927 18.3189C30.2914 18.916 27.263 19.2655 24 19.2655C20.737 19.2655 17.7086 18.916 15.2073 18.3189C11.1227 17.3437 8.44365 15.708 8.44365 13.8546V34.1455C8.44365 35.9988 11.1227 37.6346 15.2073 38.6098C17.7086 39.2069 20.737 39.5564 24 39.5564C27.263 39.5564 30.2914 39.2069 32.7927 38.6098C36.8773 37.6346 39.5563 35.9988 39.5563 34.1455Z" fill="currentColor"></path><path clip-rule="evenodd" d="M10.4485 13.8519C10.4749 13.9271 10.6203 14.246 11.379 14.7361C12.298 15.3298 13.7492 15.9145 15.6717 16.3735C18.0007 16.9296 20.8712 17.2655 24 17.2655C27.1288 17.2655 29.9993 16.9296 32.3283 16.3735C34.2508 15.9145 35.702 15.3298 36.621 14.7361C37.3796 14.246 37.5251 13.9271 37.5515 13.8519C37.5287 13.7876 37.4333 13.5973 37.0635 13.2931C36.5266 12.8516 35.6288 12.3647 34.343 11.9175C31.79 11.0295 28.1333 10.4437 24 10.4437C19.8667 10.4437 16.2099 11.0295 13.657 11.9175C12.3712 12.3647 11.4734 12.8516 10.9365 13.2931C10.5667 13.5973 10.4713 13.7876 10.4485 13.8519ZM37.5563 18.7877C36.3176 19.3925 34.8502 19.8839 33.2571 20.2642C30.5836 20.9025 27.3973 21.2655 24 21.2655C20.6027 21.2655 17.4164 20.9025 14.7429 20.2642C13.1498 19.8839 11.6824 19.3925 10.4436 18.7877V34.1275C10.4515 34.1545 10.5427 34.4867 11.379 35.027C12.298 35.6207 13.7492 36.2054 15.6717 36.6644C18.0007 37.2205 20.8712 37.5564 24 37.5564C27.1288 37.5564 29.9993 37.2205 32.3283 36.6644C34.2508 36.2054 35.702 35.6207 36.621 35.027C37.4573 34.4867 37.5485 34.1546 37.5563 34.1275V18.7877ZM41.5563 13.8546V34.1455C41.5563 36.1078 40.158 37.5042 38.7915 38.3869C37.3498 39.3182 35.4192 40.0389 33.2571 40.5551C30.5836 41.1934 27.3973 41.5564 24 41.5564C20.6027 41.5564 17.4164 41.1934 14.7429 40.5551C12.5808 40.0389 10.6502 39.3182 9.20848 38.3869C7.84205 37.5042 6.44365 36.1078 6.44365 34.1455L6.44365 13.8546C6.44365 12.2684 7.37223 11.0454 8.39581 10.2036C9.43325 9.3505 10.8137 8.67141 12.343 8.13948C15.4203 7.06909 19.5418 6.44366 24 6.44366C28.4582 6.44366 32.5797 7.06909 35.657 8.13948C37.1863 8.67141 38.5667 9.3505 39.6042 10.2036C40.6278 11.0454 41.5563 12.2684 41.5563 13.8546Z" fill="currentColor" fill-rule="evenodd"></path></svg>
                    </div>
                    <h2 class="text-base font-bold leading-tight tracking-[-0.015em]">EToH Progression</h2>
                </div>
                <div id="auth-container"></div>
            </div>

            <div class="glass-panel flex lg:hidden h-14 items-center justify-between rounded-lg px-4 w-full">
                <button id="mobile-menu-toggle" class="text-gray-300 hover:text-white">
                    <span class="material-symbols-outlined">menu</span>
                </button>
                <h2 class="text-base font-bold leading-tight tracking-[-0.015em]">EToH</h2>
                <button id="mobile-filter-toggle" class="text-gray-300 hover:text-white hidden">
                    <span class="material-symbols-outlined">filter_list</span>
                </button>
            </div>
        </header>

        <main class="flex h-full min-h-screen w-full grow flex-col lg:flex-row pt-20 pb-3 px-2 lg:px-3 gap-4 lg:gap-3 w-full mx-auto relative z-0">
            <aside id="left-sidebar" class="fixed top-14 bottom-0 left-0 z-50 w-[280px] bg-[#120E1C] lg:bg-transparent transform -translate-x-full lg:translate-x-0 transition-transform duration-300 lg:sticky lg:top-20 lg:self-start flex flex-col gap-3 h-full lg:h-[calc(100vh-80px-12px)] p-4 lg:p-0 border-r border-white/10 lg:border-none overflow-y-auto custom-scrollbar">
                <div class="glass-panel rounded-lg p-3 flex-shrink-0">
                    <div class="flex flex-col min-w-40 h-10 w-full">
                        <div class="flex w-full flex-1 items-stretch rounded-md h-full">
                            <input id="searchInput" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-l-md text-[#EAEAEA] focus:outline-0 focus:ring-1 focus:ring-[#BE00FF] border-none bg-black/20 focus:border-none h-full placeholder:text-[#9692c9] px-3 text-sm font-normal leading-normal" placeholder="Enter Roblox Username..." value=""/>
                            <div id="searchButton" class="relative text-[#9692c9] flex border-none bg-black/20 items-center justify-center pl-3 pr-3 rounded-r-md cursor-pointer w-14 hover:text-white transition-colors">
                                <span id="searchIcon" class="material-symbols-outlined text-xl">search</span>
                                <span id="searchLoadingIndicator" class="absolute hidden h-5 w-5 animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"></span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3 flex flex-col gap-2">
                        <div class="flex items-center">
                            <input id="profileOnlyCheckbox" type="checkbox" class="form-checkbox h-3.5 w-3.5 bg-black/20 border-white/20 rounded text-[#BE00FF] focus:ring-[#BE00FF]/50 transition-all">
                            <label for="profileOnlyCheckbox" class="ml-2 text-xs text-gray-400 select-none cursor-pointer">Profile Only (Fast Load, No Tower Data)</label>
                        </div>
                        <div class="flex items-center">
                            <input id="forceRefreshCheckbox" type="checkbox" class="form-checkbox h-3.5 w-3.5 bg-black/20 border-white/20 rounded text-[#BE00FF] focus:ring-[#BE00FF]/50 transition-all">
                            <label for="forceRefreshCheckbox" class="ml-2 text-xs text-gray-400 select-none cursor-pointer">Force Refresh (Slow)</label>
                        </div>
                    </div>
                </div>

                <div class="glass-panel flex-grow rounded-lg p-3 flex-shrink-0">
                    <div class="grid grid-cols-2 gap-1 p-1 bg-black/20 rounded-lg mb-4 border border-white/5">
                        <button id="nav-btn-discovery" class="px-2 py-1.5 text-xs font-bold text-white bg-[#BE00FF]/20 border border-[#BE00FF]/50 rounded-md shadow-sm transition-all text-center">
                            Discovery
                        </button>
                        <button id="nav-btn-career" class="px-2 py-1.5 text-xs font-bold text-gray-500 hover:text-white hover:bg-white/5 border border-transparent rounded-md transition-all text-center">
                            My Career
                        </button>
                    </div>

                    <div id="nav-group-discovery" class="flex flex-col gap-4">
                        <div class="flex flex-col gap-3">
                            <h1 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2">Visualization</h1>
                            <div id="nav-links" class="flex flex-col gap-1">
                                <a data-view="chart" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">stacked_line_chart</span>
                                    <p class="text-xs font-medium leading-normal">Completion Chart</p>
                                </a>
                                <a data-view="list" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">list</span>
                                    <p class="text-xs font-medium leading-normal">Completion History</p>
                                </a>
                                <a data-view="table" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">grid_view</span>
                                    <p class="text-xs font-medium leading-normal">Area Completion</p>
                                </a>
                                <a data-view="library" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">filter_alt</span>
                                    <p class="text-xs font-medium leading-normal">Tower Library</p>
                                </a>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-3">
                            <h1 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2">Games & Fun</h1>
                            <div id="games-nav-links" class="flex flex-col gap-1">
                                <a data-view="games" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">swap_vert</span>
                                    <p class="text-xs font-medium leading-normal">Higher or Lower</p>
                                </a>
                                <a data-view="ladder" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">segment</span>
                                    <p class="text-xs font-medium leading-normal">Difficulty Ladder</p>
                                </a>
                                <a data-view="roulette" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">change_circle</span>
                                    <p class="text-xs font-medium leading-normal">Tower Roulette</p>
                                </a>
                            </div>
                        </div>

                        <div class="flex flex-col gap-3">
                            <h1 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2">Community</h1>
                            <div id="misc-nav-links" class="flex flex-col gap-1">
                                <a data-view="leaderboard" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">trophy</span>
                                    <p class="text-xs font-medium leading-normal">Leaderboard</p>
                                </a>
                            </div>
                        </div>

                        <!-- <div class="flex flex-col gap-3">
                            <h1 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2">Limited Time</h1>
                            <div id="limited-nav-links" class="flex flex-col gap-1">
                                <div id="open-wrapped-btn"></div>
                            </div>
                        </div> -->
                    </div>

                    <div id="nav-group-career" class="hidden flex-col gap-4">
                        <div class="flex flex-col gap-3">
                            <h1 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2">Management</h1>
                            <div id="career-nav-links" class="flex flex-col gap-1">
                                <a data-view="profile" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">person</span>
                                    <p class="text-xs font-medium leading-normal">My Dashboard</p>
                                </a>
                                <a data-view="collections" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">collections_bookmark</span>
                                    <p class="text-xs font-medium leading-normal">Collections</p>
                                </a>
                                <a data-view="tierlist" class="flex items-center gap-2.5 px-2 py-1.5 rounded-md text-gray-300 transition-colors hover:bg-white/5 hover:text-white" href="#">
                                    <span class="material-symbols-outlined text-xl">view_list</span>
                                    <p class="text-xs font-medium leading-normal">Tier List</p>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-panel flex flex-col rounded-lg p-3 flex-shrink-0 mb-4 lg:mb-0">
                    <h2 class="text-sm font-medium leading-normal mb-3">Quick Stats</h2>
                    <div id="statsContainer" class="grid grid-cols-1 gap-2" style="display: none;">
                        <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                            <p class="text-xs font-medium leading-normal text-gray-400">Total Towers</p>
                            <p id="totalTowersStat" class="tracking-light text-base font-bold leading-tight">0/0</p>
                        </div>
                        <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                            <p class="text-xs font-medium leading-normal text-gray-400">Hardest Tower</p>
                            <p id="hardestTowerStat" class="tracking-light text-base font-bold leading-tight">N/A</p>
                        </div>
                        <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                            <p class="text-xs font-medium leading-normal text-gray-400">Hardest Difficulty</p>
                            <p id="hardestDifficultyStat" class="tracking-light text-base font-bold leading-tight">N/A</p>
                        </div>
                    </div>
                </div>

                <div class="glass-panel flex flex-col rounded-lg p-3 flex-shrink-0 mt-auto">
                    <p class="text-[9px] text-gray-500 text-center leading-relaxed font-medium">
                        This project is not affiliated with, endorsed by, or approved by Roblox Corporation.
                    </p>
                    <div class="flex justify-center items-center gap-3 mt-2 pt-2 border-t border-white/5">
                        <a href="privacy.html" class="text-[10px] text-gray-400 hover:text-[#BE00FF] transition-colors font-bold">Privacy</a>
                        <span class="text-[10px] text-gray-600">|</span>
                        <a href="terms.html" class="text-[10px] text-gray-400 hover:text-[#BE00FF] transition-colors font-bold">Terms</a>
                        <span class="text-[10px] text-gray-600">|</span>
                        <a href="https://discord.gg/GDMjAytHPS" target="_blank" class="text-gray-400 hover:text-[#5865F2] transition-colors" title="Join Discord">
                            <svg class="h-3 w-3" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M524.5 133.8C524.3 133.5 524.1 133.2 523.7 133.1C485.6 115.6 445.3 103.1 404 96C403.6 95.9 403.2 96 402.9 96.1C402.6 96.2 402.3 96.5 402.1 96.9C396.6 106.8 391.6 117.1 387.2 127.5C342.6 120.7 297.3 120.7 252.8 127.5C248.3 117 243.3 106.8 237.7 96.9C237.5 96.6 237.2 96.3 236.9 96.1C236.6 95.9 236.2 95.9 235.8 95.9C194.5 103 154.2 115.5 116.1 133C115.8 133.1 115.5 133.4 115.3 133.7C39.1 247.5 18.2 358.6 28.4 468.2C28.4 468.5 28.5 468.7 28.6 469C28.7 469.3 28.9 469.4 29.1 469.6C73.5 502.5 123.1 527.6 175.9 543.8C176.3 543.9 176.7 543.9 177 543.8C177.3 543.7 177.7 543.4 177.9 543.1C189.2 527.7 199.3 511.3 207.9 494.3C208 494.1 208.1 493.8 208.1 493.5C208.1 493.2 208.1 493 208 492.7C207.9 492.4 207.8 492.2 207.6 492.1C207.4 492 207.2 491.8 206.9 491.7C191.1 485.6 175.7 478.3 161 469.8C160.7 469.6 160.5 469.4 160.3 469.2C160.1 469 160 468.6 160 468.3C160 468 160 467.7 160.2 467.4C160.4 467.1 160.5 466.9 160.8 466.7C163.9 464.4 167 462 169.9 459.6C170.2 459.4 170.5 459.2 170.8 459.2C171.1 459.2 171.5 459.2 171.8 459.3C268 503.2 372.2 503.2 467.3 459.3C467.6 459.2 468 459.1 468.3 459.1C468.6 459.1 469 459.3 469.2 459.5C472.1 461.9 475.2 464.4 478.3 466.7C478.5 466.9 478.7 467.1 478.9 467.4C479.1 467.7 479.1 468 479.1 468.3C479.1 468.6 479 468.9 478.8 469.2C478.6 469.5 478.4 469.7 478.2 469.8C463.5 478.4 448.2 485.7 432.3 491.6C432.1 491.7 431.8 491.8 431.6 492C431.4 492.2 431.3 492.4 431.2 492.7C431.1 493 431.1 493.2 431.1 493.5C431.1 493.8 431.2 494 431.3 494.3C440.1 511.3 450.1 527.6 461.3 543.1C461.5 543.4 461.9 543.7 462.2 543.8C462.5 543.9 463 543.9 463.3 543.8C516.2 527.6 565.9 502.5 610.4 469.6C610.6 469.4 610.8 469.2 610.9 469C611 468.8 611.1 468.5 611.1 468.2C623.4 341.4 590.6 231.3 524.2 133.7zM222.5 401.5C193.5 401.5 169.7 374.9 169.7 342.3C169.7 309.7 193.1 283.1 222.5 283.1C252.2 283.1 275.8 309.9 275.3 342.3C275.3 375 251.9 401.5 222.5 401.5zM417.9 401.5C388.9 401.5 365.1 374.9 365.1 342.3C365.1 309.7 388.5 283.1 417.9 283.1C447.6 283.1 471.2 309.9 470.7 342.3C470.7 375 447.5 401.5 417.9 401.5z"/></svg>
                        </a>
                    </div>
                    <p class="text-[9px] text-gray-600 text-center mt-1.5 font-mono">
                        &copy; 2025 EToH Progression. All rights reserved.
                    </p>
                </div>
            </aside>

            <section class="glass-panel flex-1 rounded-lg p-4 min-w-0 overflow-hidden relative z-0">
                <div class="flex flex-col h-full w-full">
                    <h2 id="main-content-title" class="text-xl font-bold mb-3"></h2>
                    
                    <div id="chart-view" class="flex-grow w-full h-full relative min-h-[60vh] lg:min-h-0">
                        <canvas id="completionChart"></canvas>
                    </div>
                    
                    <div id="list-view" class="flex-grow w-full h-full overflow-y-auto hidden">
                        <div id="full-history-container" class="bg-black/20 rounded-md overflow-hidden overflow-x-auto"></div>
                    </div>
                    
                    <div id="table-view" class="flex-grow w-full h-full overflow-y-auto hidden">
                        <div id="area-history-container" class="grid grid-cols-1 lg:grid-cols-2 gap-x-6 gap-y-6"></div>
                    </div>
                    
                    <div id="leaderboard-view" class="flex-grow w-full h-full overflow-y-auto hidden">
                        <div id="leaderboard-container" class="bg-black/20 rounded-md overflow-hidden overflow-x-auto">
                            <div class="flex items-center justify-center p-8 text-sm text-gray-500">Loading leaderboard...</div>
                        </div>
                    </div>
                    
                    <div id="games-view" class="flex-grow w-full h-full overflow-y-auto hidden">
                        <div class="flex flex-col items-center justify-center min-h-full w-full max-w-5xl mx-auto p-4 relative">
                            <div id="hilo-game-over" class="absolute inset-0 z-50 bg-black/90 backdrop-blur-md flex flex-col items-center justify-center hidden rounded-2xl border border-white/10">
                                <h2 class="text-6xl font-black text-red-500 mb-2 tracking-tighter">GAME OVER</h2>
                                <p class="text-gray-400 text-lg mb-6">You chose poorly.</p>
                                <div class="flex flex-col items-center gap-1 mb-8">
                                    <p class="text-sm text-gray-500 uppercase tracking-widest font-bold">Final Streak</p>
                                    <span id="hilo-final-score" class="text-4xl font-bold text-white">0</span>
                                </div>
                                <button id="hilo-restart-btn" class="px-8 py-3 bg-white hover:bg-gray-200 text-black font-bold rounded-full transition-transform hover:scale-105">
                                    Play Again
                                </button>
                            </div>

                            <div class="flex flex-col md:flex-row items-center justify-center w-full gap-6 relative">
                                <div class="w-full md:w-1/2 aspect-[3/4] max-h-[550px] bg-[#0A0A0F] border border-white/10 rounded-3xl relative overflow-hidden flex flex-col items-center p-8 transition-all duration-500 z-10 shadow-2xl">
                                    <div id="hilo-bg-left" class="absolute top-0 left-0 w-full h-2 transition-colors duration-500"></div>
                                    <div id="hilo-glow-left" class="absolute -top-20 left-1/2 -translate-x-1/2 w-40 h-40 blur-[80px] opacity-20 transition-colors duration-500 rounded-full"></div>

                                    <div class="flex-1 flex flex-col items-center justify-center w-full gap-4 relative z-10">
                                        <h3 id="hilo-name-left" class="text-2xl md:text-4xl font-black text-white text-center leading-tight">Loading...</h3>
                                        
                                        <div class="flex flex-wrap justify-center gap-2 mb-4">
                                            <div id="hilo-area-left" class="px-3 py-1 rounded-full text-xs font-bold border">Area</div>
                                            <div id="hilo-diff-left" class="px-3 py-1 rounded-full text-xs font-bold border">Difficulty</div>
                                        </div>

                                        <div class="w-12 h-1 bg-white/10 rounded-full mb-4"></div>

                                        <p class="text-gray-500 uppercase tracking-widest text-xs font-bold">Has</p>
                                        <p id="hilo-count-left" class="text-5xl md:text-7xl font-black text-white my-2 tracking-tight text-center">0</p>
                                        <p class="text-gray-500 uppercase tracking-widest text-xs font-bold">Victors</p>
                                    </div>
                                </div>

                                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 w-12 h-12 bg-[#120E1C] border border-white/20 rounded-full flex items-center justify-center shadow-xl">
                                    <span class="text-xs font-black text-gray-500">VS</span>
                                </div>

                                <div class="w-full md:w-1/2 aspect-[3/4] max-h-[550px] bg-[#0A0A0F] border border-white/10 rounded-3xl relative overflow-hidden flex flex-col items-center p-8 transition-all duration-500 z-10 shadow-2xl">
                                    <div id="hilo-bg-right" class="absolute top-0 left-0 w-full h-2 transition-colors duration-500"></div>
                                    <div id="hilo-glow-right" class="absolute -top-20 left-1/2 -translate-x-1/2 w-40 h-40 blur-[80px] opacity-20 transition-colors duration-500 rounded-full"></div>

                                    <div class="flex-1 flex flex-col items-center justify-center w-full gap-4 relative z-10">
                                        <h3 id="hilo-name-right" class="text-2xl md:text-4xl font-black text-white text-center leading-tight">Loading...</h3>
                                        
                                        <div class="flex flex-wrap justify-center gap-2 mb-4">
                                            <div id="hilo-area-right" class="px-3 py-1 rounded-full text-xs font-bold border">Area</div>
                                            <div id="hilo-diff-right" class="px-3 py-1 rounded-full text-xs font-bold border">Difficulty</div>
                                        </div>

                                        <div class="w-12 h-1 bg-white/10 rounded-full mb-4"></div>
                                        
                                        <p class="text-gray-500 uppercase tracking-widest text-xs font-bold">Has</p>
                                        
                                        <div id="hilo-controls" class="flex flex-col gap-3 w-full max-w-[200px] mt-2">
                                            <button id="btn-higher" class="group relative w-full py-3 bg-[#1A1A22] border border-white/10 hover:border-green-500 hover:bg-green-500/10 text-gray-300 hover:text-green-400 font-bold uppercase tracking-widest rounded-lg transition-all duration-200">
                                                <span class="flex items-center justify-center gap-2 text-sm">
                                                    <span class="material-symbols-outlined text-lg">keyboard_arrow_up</span> Higher
                                                </span>
                                            </button>
                                            
                                            <button id="btn-lower" class="group relative w-full py-3 bg-[#1A1A22] border border-white/10 hover:border-red-500 hover:bg-red-500/10 text-gray-300 hover:text-red-400 font-bold uppercase tracking-widest rounded-lg transition-all duration-200">
                                                <span class="flex items-center justify-center gap-2 text-sm">
                                                    <span class="material-symbols-outlined text-lg">keyboard_arrow_down</span> Lower
                                                </span>
                                            </button>
                                        </div>

                                        <div id="hilo-result" class="hidden flex-col items-center justify-center w-full animate-[popIn_0.3s_ease-out]">
                                            <p id="hilo-count-right" class="text-5xl md:text-7xl font-black text-white my-2 tracking-tight text-center">0</p>
                                            <p class="text-gray-500 uppercase tracking-widest text-xs font-bold">Victors</p>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div id="roulette-view" class="flex-grow w-full h-full overflow-y-auto hidden">
                        <div class="flex flex-col items-center justify-start min-h-[80vh] w-full max-w-7xl mx-auto p-4 gap-12">
                            <div class="text-center space-y-2 mt-8 mb-4">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">Tower Roulette</h2>
                                <p class="text-gray-400">Is this a ToPtW reference?</p>
                            </div>

                            <div class="relative w-full h-96 overflow-hidden flex items-center select-none flex-shrink-0">
                                <div class="absolute top-10 bottom-10 left-1/2 -translate-x-1/2 w-[2px] bg-gradient-to-b from-transparent via-[#FFD700] to-transparent z-40 shadow-[0_0_15px_rgba(255,215,0,0.6)]"></div>
                                <div class="absolute top-8 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-t-[14px] border-t-[#FFD700] z-40 drop-shadow-lg"></div>
                                <div class="absolute bottom-8 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-b-[14px] border-b-[#FFD700] z-40 drop-shadow-lg"></div>

                                <div id="roulette-track" class="absolute left-1/2 flex items-center h-full gap-4 transition-transform will-change-transform" style="transform: translateX(0px); perspective: 1000px;"></div>
                            </div>

                            <div class="flex flex-col items-center gap-6 w-full max-w-4xl relative z-40">
                                <button id="btn-spin-roulette" class="px-14 py-4 bg-gradient-to-b from-emerald-500 to-emerald-700 hover:from-emerald-400 hover:to-emerald-600 text-white text-xl font-black uppercase tracking-widest rounded-full shadow-[0_0_30px_rgba(16,185,129,0.3)] hover:shadow-[0_0_50px_rgba(16,185,129,0.5)] hover:scale-105 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none border border-emerald-400/30">
                                    SPIN
                                </button>
                                
                                <div id="roulette-result" class="flex flex-col items-center gap-2 opacity-0 transition-opacity duration-500 transform translate-y-4 h-24">
                                    <div class="text-sm text-gray-500 uppercase tracking-widest font-bold">You rolled</div>
                                    <h3 id="roulette-winner-name" class="text-3xl font-black text-white text-center drop-shadow-lg">...</h3>
                                    <div class="flex items-center gap-3 mt-2">
                                        <span id="roulette-winner-diff" class="px-4 py-1.5 rounded-full text-sm font-bold border">Difficulty</span>
                                        <button id="roulette-view-details" class="text-xs text-gray-500 hover:text-white underline underline-offset-4 transition-colors">View Details</button>
                                    </div>
                                </div>

                                <div class="w-full mt-2 border-t border-white/5 pt-6">
                                    <div class="flex items-center justify-between mb-3 px-2">
                                        <h3 class="text-xs text-gray-500 uppercase tracking-widest font-bold">Recent Drops</h3>
                                        <button id="btn-clear-history" class="text-[10px] text-gray-600 hover:text-white uppercase font-bold transition-colors">Clear</button>
                                    </div>
                                    <div id="roulette-history" class="flex gap-3 overflow-x-auto pb-2 custom-scrollbar min-h-[80px] px-2">
                                        <div id="history-empty" class="text-xs text-gray-700 italic px-2 py-4">Spin the wheel to see history...</div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div id="ladder-view" class="flex-grow w-full h-full overflow-y-auto hidden">
                        <div class="flex flex-col items-center justify-center min-h-[80vh] w-full max-w-4xl mx-auto p-4 gap-8">
                            <div class="text-center space-y-2">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">The Ladder</h2>
                                <p class="text-gray-400">Sort the towers from <span class="text-green-400 font-bold">Easiest</span> to <span class="text-red-400 font-bold">Hardest</span>.</p>
                            </div>

                            <div class="w-full max-w-lg relative">
                                <div id="ladder-list" class="flex flex-col gap-3 relative min-h-[400px]">
                                    <div class="text-center text-gray-500 py-10">Loading...</div>
                                </div>

                                <div class="mt-8 flex justify-center gap-4">
                                    <button id="btn-ladder-submit" class="px-10 py-3 bg-[#BE00FF] hover:bg-[#a000d6] text-white font-bold uppercase tracking-widest rounded-lg shadow-lg transition-all active:scale-95">
                                        Submit Order
                                    </button>
                                    <button id="btn-ladder-next" class="hidden px-10 py-3 bg-white text-black hover:bg-gray-200 font-bold uppercase tracking-widest rounded-lg shadow-lg transition-all active:scale-95">
                                        Next Round
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="library-view" class="flex-grow w-full h-full overflow-y-auto hidden">
                        <div id="library-container" class="w-full bg-black/20 border border-white/5 rounded-md overflow-hidden h-fit overflow-x-auto">
                            <div class="p-8 text-center text-gray-500 text-sm">Loading library data...</div>
                        </div>
                    </div>

                    <div id="profile-view" class="flex-grow w-full h-full overflow-y-auto hidden"></div>

                    <div id="collections-view" class="flex-grow w-full h-full overflow-y-auto hidden"></div>

                    <div id="tierlist-view" class="flex-grow w-full h-full overflow-y-auto hidden"></div>
                </div>
            </section>

            <div id="mobile-backdrop" class="fixed inset-0 bg-black/60 z-40 hidden lg:hidden backdrop-blur-sm"></div>

            <aside id="game-stats-sidebar" class="fixed top-14 bottom-0 right-0 z-50 w-[240px] bg-[#120E1C] lg:bg-transparent transform translate-x-full lg:translate-x-0 transition-transform duration-300 lg:sticky lg:top-20 lg:self-start flex-col gap-3 h-full lg:h-[calc(100vh-80px-12px)] p-4 lg:p-0 border-l border-white/10 lg:border-none hidden">
                <div class="glass-panel flex-grow rounded-lg p-3">
                    <h2 class="text-sm font-medium leading-normal mb-3 border-b border-white/10 pb-2">Session Stats</h2>
                    <div class="grid grid-cols-1 gap-2">
                        <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                            <p class="text-xs font-medium leading-normal text-gray-400">Games Played</p>
                            <p id="hilo-stat-played" class="text-xl font-bold text-white">0</p>
                        </div>
                        <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                            <p class="text-xs font-medium leading-normal text-gray-400">Highest Streak</p>
                            <p id="hilo-stat-best" class="text-xl font-bold text-[#FFD700]">0</p>
                        </div>
                        <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                            <p class="text-xs font-medium leading-normal text-gray-400">Current Streak</p>
                            <p id="hilo-stat-current" class="text-xl font-bold text-white">0</p>
                        </div>
                    </div>
                </div>
            </aside>
            
            <aside id="library-filters-sidebar" class="fixed top-14 bottom-0 right-0 z-50 w-[320px] lg:w-[420px] bg-[#120E1C] lg:bg-transparent transform translate-x-full lg:translate-x-0 transition-transform duration-300 lg:sticky lg:top-0 lg:self-start flex-col gap-3 h-full lg:h-[calc(100vh-80px-12px)] max-h-full p-4 lg:p-0 border-l border-white/10 lg:border-none hidden overflow-y-auto">
                <div class="glass-panel flex-grow rounded-lg p-5 flex flex-col gap-6 overflow-hidden">
                    <div class="flex justify-between items-center border-b border-white/10 pb-3 flex-shrink-0">
                        <h3 class="text-sm font-bold text-white">Library Filters</h3>
                        <button id="mobile-close-filters" class="lg:hidden text-gray-400 hover:text-white"><span class="material-symbols-outlined">close</span></button>
                    </div>

                    <div class="flex-grow overflow-y-auto flex flex-col gap-6 pr-1 custom-scrollbar">
                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Name</label>
                            <div class="relative">
                                <span class="material-symbols-outlined absolute left-3 top-2.5 text-gray-500 text-lg">search</span>
                                <input id="lib-search" type="text" placeholder="Search towers..." 
                                    class="w-full bg-black/30 border border-white/10 rounded-md pl-10 pr-3 py-1.5 lg:py-2.5 text-[10px] lg:text-sm text-white focus:border-[#BE00FF] focus:outline-none transition-all">
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Sort Order</label>
                            <button id="lib-sort-btn" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-1.5 lg:py-2.5 text-[10px] lg:text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left">
                                <span id="lib-sort-text">Hardest First (Descending)</span>
                                <span id="lib-sort-icon" class="material-symbols-outlined text-sm text-gray-500">arrow_downward</span>
                            </button>
                        </div>

                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Status</label>
                            <div class="grid grid-cols-3 gap-1 bg-black/30 p-1 rounded-md border border-white/10">
                                <button class="status-filter-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white" data-value="All">All</button>
                                <button class="status-filter-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all text-gray-400 hover:text-white" data-value="Completed">Completed</button>
                                <button class="status-filter-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all text-gray-400 hover:text-white" data-value="Incomplete">Incomplete</button>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Type</label>
                            <div class="grid grid-cols-3 gap-1 bg-black/30 p-1 rounded-md border border-white/10">
                                <button class="type-filter-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white" data-value="Tower">Tower</button>
                                <button class="type-filter-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white" data-value="Citadel">Citadel</button>
                                <button class="type-filter-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white" data-value="Steeple">Steeple</button>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5 relative">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Area</label>
                            <button id="area-dropdown-btn" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-1.5 lg:py-2.5 text-[10px] lg:text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                <span class="truncate">All Areas</span>
                                <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">expand_more</span>
                            </button>
                            <div id="area-dropdown-menu" class="hidden absolute top-full left-0 right-0 mt-1 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col p-2 gap-1 max-h-[300px] overflow-y-auto">
                                <div id="area-list-container" class="flex flex-col gap-1"></div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-2 relative mt-1">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Difficulty</label>
                            
                            <div class="grid grid-cols-2 gap-1 bg-black/30 p-1 rounded-md border border-white/10 w-full">
                                <button id="btn-mode-range" class="px-2 py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white">Range</button>
                                <button id="btn-mode-select" class="px-2 py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all text-gray-400 hover:text-white">Select</button>
                            </div>

                            <div id="diff-ui-range" class="w-full flex items-center gap-2 mt-1">
                                <div class="flex-1 flex flex-col gap-1 min-w-0">
                                    <label class="text-[10px] text-gray-500 font-bold">MIN</label>
                                    <input id="diff-min-input" type="number" step="0.01" min="0" max="12" value="1.00" 
                                        class="w-full bg-black/30 border border-white/10 rounded-md px-2 py-1.5 lg:py-2 text-[10px] lg:text-sm text-white focus:border-[#BE00FF] focus:outline-none font-mono text-center">
                                </div>
                                <div class="pt-4 text-gray-400 font-bold text-lg">-</div>
                                <div class="flex-1 flex flex-col gap-1 min-w-0">
                                    <label class="text-[10px] text-gray-500 font-bold">MAX</label>
                                    <input id="diff-max-input" type="number" step="0.01" min="0" max="12" value="12.00" 
                                        class="w-full bg-black/30 border border-white/10 rounded-md px-2 py-1.5 lg:py-2 text-[10px] lg:text-sm text-white focus:border-[#BE00FF] focus:outline-none font-mono text-center">
                                </div>
                            </div>

                            <div id="diff-ui-select" class="hidden relative w-full mt-1">
                                <button id="diff-dropdown-btn" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-1.5 lg:py-2.5 text-[10px] lg:text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                    <span class="truncate">All Difficulties</span>
                                    <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">expand_more</span>
                                </button>
                                <div id="diff-dropdown-menu" class="hidden absolute top-full left-0 right-0 mt-1 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col p-2 gap-1 max-h-[300px] overflow-y-auto">
                                    <div id="diff-list-container" class="flex flex-col gap-1"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5 relative">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Length</label>
                            <button id="length-dropdown-btn" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-1.5 lg:py-2.5 text-[10px] lg:text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                <span class="truncate">All Lengths</span>
                                <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">expand_more</span>
                            </button>
                            <div id="length-dropdown-menu" class="hidden absolute top-full left-0 right-0 mt-1 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col p-2 gap-1 max-h-[300px] overflow-y-auto">
                                <div id="length-list-container" class="flex flex-col gap-1"></div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Floors</label>
                            <div class="flex items-center gap-2">
                                <input id="floor-min-input" type="number" placeholder="Min" min="1"
                                    class="flex-1 bg-black/30 border border-white/10 rounded-md px-2 py-1.5 lg:py-2 text-[10px] lg:text-sm text-white focus:border-[#BE00FF] focus:outline-none font-mono text-center min-w-0">
                                <span class="text-gray-400 font-bold">-</span>
                                <input id="floor-max-input" type="number" placeholder="Max" min="1"
                                    class="flex-1 bg-black/30 border border-white/10 rounded-md px-2 py-1.5 lg:py-2 text-[10px] lg:text-sm text-white focus:border-[#BE00FF] focus:outline-none font-mono text-center min-w-0">
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5 relative">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Creator</label>
                            <button id="creator-dropdown-btn" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-1.5 lg:py-2.5 text-[10px] lg:text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                <span class="truncate">All Creators</span>
                                <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">expand_more</span>
                            </button>
                            <div id="creator-dropdown-menu" class="hidden absolute top-full left-0 right-0 mt-1 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col max-h-[300px]">
                                <div class="p-2 border-b border-white/10 bg-[#1C1C22]">
                                    <input id="creator-search-input" type="text" placeholder="Search creators..." class="w-full bg-black/50 border border-white/10 rounded px-2 py-1.5 text-xs text-white focus:border-[#BE00FF] focus:outline-none">
                                    <div class="flex gap-2 mt-2">
                                        <button id="btn-select-all-creators" class="text-[10px] text-[#BE00FF] font-bold hover:underline">ALL</button>
                                        <button id="btn-deselect-all-creators" class="text-[10px] text-gray-400 font-bold hover:underline">NONE</button>
                                    </div>
                                </div>
                                <div id="creator-list-container" class="p-2 overflow-y-auto flex flex-col gap-1"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <aside id="chart-filters-sidebar" class="fixed top-14 bottom-0 right-0 z-50 w-[320px] bg-[#120E1C] lg:bg-transparent transform translate-x-full lg:translate-x-0 transition-transform duration-300 lg:sticky lg:top-20 lg:self-start flex flex-col h-[calc(100vh-3.5rem)] lg:h-[calc(100vh-6rem)] p-4 lg:p-0 border-l border-white/10 lg:border-none hidden">
                <div class="glass-panel flex-grow rounded-lg p-5 flex flex-col gap-6 overflow-hidden h-full">
                    <div class="flex justify-between items-center border-b border-white/10 pb-3 flex-shrink-0">
                        <h3 class="text-sm font-bold text-white">Chart Options</h3>
                        <button id="mobile-close-chart-filters" class="lg:hidden text-gray-400 hover:text-white"><span class="material-symbols-outlined">close</span></button>
                    </div>
            
                    <div class="flex-grow overflow-y-auto flex flex-col gap-6 pr-1 custom-scrollbar">
                        <div class="flex flex-col gap-1.5 relative">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Date Range</label>
                            <button id="date-range-trigger" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-2.5 text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                <span id="date-range-label" class="truncate">All Time</span>
                                <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">calendar_month</span>
                            </button>
                            
                            <div id="date-range-dropdown" class="hidden absolute top-full left-0 right-0 mt-2 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col p-3 gap-3">
                                <div class="grid grid-cols-2 gap-2">
                                    <button data-range="all" class="date-preset-btn px-2 py-1.5 text-xs font-bold rounded bg-[#BE00FF]/20 text-[#BE00FF] border border-[#BE00FF]/50 hover:bg-[#BE00FF]/40">All Time</button>
                                    <button data-range="this_year" class="date-preset-btn px-2 py-1.5 text-xs font-bold rounded bg-white/5 text-gray-300 border border-white/10 hover:bg-white/10">This Year</button>
                                    <button data-range="last_year" class="date-preset-btn px-2 py-1.5 text-xs font-bold rounded bg-white/5 text-gray-300 border border-white/10 hover:bg-white/10">Last Year</button>
                                    <button data-range="last_30" class="date-preset-btn px-2 py-1.5 text-xs font-bold rounded bg-white/5 text-gray-300 border border-white/10 hover:bg-white/10">Last 30 Days</button>
                                </div>
                                <div class="border-t border-white/10 pt-2 flex flex-col gap-2">
                                    <div class="flex flex-col gap-1">
                                        <label class="text-[10px] text-gray-500 font-bold uppercase">From</label>
                                        <input type="date" id="sidebar-start-date" class="w-full bg-black/50 border border-white/10 rounded px-2 py-1.5 text-xs text-white focus:border-[#BE00FF] focus:outline-none">
                                    </div>
                                    <div class="flex flex-col gap-1">
                                        <label class="text-[10px] text-gray-500 font-bold uppercase">To</label>
                                        <input type="date" id="sidebar-end-date" class="w-full bg-black/50 border border-white/10 rounded px-2 py-1.5 text-xs text-white focus:border-[#BE00FF] focus:outline-none">
                                    </div>
                                    <button id="apply-custom-date" class="w-full mt-1 bg-[#BE00FF] hover:bg-[#BE00FF]/80 text-white font-bold py-1.5 rounded text-xs transition-colors">Apply Range</button>
                                </div>
                            </div>
                        </div>
            
                        <div class="flex flex-col gap-1.5 relative">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Time Interval</label>
                            <button id="time-unit-trigger" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-2.5 text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                <span id="time-unit-label" class="truncate">Auto</span>
                                <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">expand_more</span>
                            </button>
                            <div id="time-unit-dropdown" class="hidden absolute top-full left-0 right-0 mt-2 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col p-2 gap-1 max-h-[300px] overflow-y-auto">
                                <button data-value="auto" class="time-unit-item text-left px-3 py-2 text-xs font-bold rounded text-white bg-[#BE00FF]/20 border border-[#BE00FF]/50">Auto</button>
                                <button data-value="year" class="time-unit-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">Yearly</button>
                                <button data-value="quarter" class="time-unit-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">Quarterly</button>
                                <button data-value="month" class="time-unit-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">Monthly</button>
                                <button data-value="week" class="time-unit-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">Weekly</button>
                                <button data-value="day" class="time-unit-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">Daily</button>
                            </div>
                        </div>
            
                        <div class="flex flex-col gap-1.5 relative">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Completion Count Interval</label>
                            <button id="y-axis-trigger" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-2.5 text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                <span id="y-axis-label" class="truncate">Auto</span>
                                <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">expand_more</span>
                            </button>
                            <div id="y-axis-dropdown" class="hidden absolute top-full left-0 right-0 mt-2 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col p-2 gap-1 max-h-[300px] overflow-y-auto">
                                <button data-value="auto" class="y-axis-item text-left px-3 py-2 text-xs font-bold rounded text-white bg-[#BE00FF]/20 border border-[#BE00FF]/50">Auto</button>
                                <button data-value="1" class="y-axis-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">1</button>
                                <button data-value="5" class="y-axis-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">5</button>
                                <button data-value="10" class="y-axis-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">10</button>
                                <button data-value="25" class="y-axis-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">25</button>
                                <button data-value="50" class="y-axis-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">50</button>
                                <button data-value="100" class="y-axis-item text-left px-3 py-2 text-xs font-bold rounded text-gray-300 hover:bg-white/5 border border-transparent">100</button>
                            </div>
                        </div>
            
                        <div class="mt-auto pt-4 border-t border-white/10">
                            <button id="sidebar-chart-reset" class="w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-500/10 hover:bg-red-500/20 border border-red-500/50 text-red-400 rounded-md transition-all text-sm font-bold">
                                <span class="material-symbols-outlined text-lg">restart_alt</span>
                                Reset Chart
                            </button>
                        </div>
                    </div>
                </div>
            </aside>

            <aside id="roulette-filters-sidebar" class="fixed top-14 bottom-0 right-0 z-50 w-[320px] lg:w-[420px] bg-[#120E1C] lg:bg-transparent transform translate-x-full lg:translate-x-0 transition-transform duration-300 lg:sticky lg:top-0 lg:self-start flex-col gap-3 h-full lg:h-[calc(100vh-80px-12px)] max-h-full p-4 lg:p-0 border-l border-white/10 lg:border-none hidden overflow-y-auto">
                <div class="glass-panel flex-grow rounded-lg p-5 flex flex-col gap-6 overflow-hidden">
                    <div class="flex justify-between items-center border-b border-white/10 pb-3 flex-shrink-0">
                        <h3 class="text-sm font-bold text-white">Roulette Filters</h3>
                        <button id="mobile-close-roulette-filters" class="lg:hidden text-gray-400 hover:text-white"><span class="material-symbols-outlined">close</span></button>
                    </div>

                    <div class="flex-grow overflow-y-auto flex flex-col gap-6 pr-1 custom-scrollbar">
                        <div class="flex items-center justify-between bg-black/30 p-3 rounded-lg border border-white/10">
                            <label for="toggle-show-names" class="text-xs font-bold text-gray-300 uppercase tracking-wider cursor-pointer">Show Tower Names</label>
                            
                            <label for="toggle-show-names" class="flex items-center cursor-pointer relative">
                                <input type="checkbox" id="toggle-show-names" class="sr-only peer">
                                <div class="w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-[#BE00FF] border-gray-600"></div>
                            </label>
                        </div>

                        <div class="flex flex-col gap-2 relative mt-1">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Difficulty</label>
                            <div class="flex items-center gap-2">
                                <div class="flex-1 flex flex-col gap-1 min-w-0">
                                    <label class="text-[10px] text-gray-500 font-bold">MIN</label>
                                    <input id="roul-diff-min" type="number" step="0.01" min="0" max="12" value="1.00" class="w-full bg-black/30 border border-white/10 rounded-md px-2 py-1.5 lg:py-2 text-[10px] lg:text-sm text-white focus:border-[#BE00FF] focus:outline-none font-mono text-center">
                                </div>
                                <div class="pt-4 text-gray-400 font-bold text-lg">-</div>
                                <div class="flex-1 flex flex-col gap-1 min-w-0">
                                    <label class="text-[10px] text-gray-500 font-bold">MAX</label>
                                    <input id="roul-diff-max" type="number" step="0.01" min="0" max="12" value="12.00" class="w-full bg-black/30 border border-white/10 rounded-md px-2 py-1.5 lg:py-2 text-[10px] lg:text-sm text-white focus:border-[#BE00FF] focus:outline-none font-mono text-center">
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Status</label>
                            <div class="grid grid-cols-3 gap-1 bg-black/30 p-1 rounded-md border border-white/10">
                                <button class="roul-status-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white" data-value="All">All</button>
                                <button class="roul-status-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all text-gray-400 hover:text-white" data-value="Completed">Completed</button>
                                <button class="roul-status-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all text-gray-400 hover:text-white" data-value="Incomplete">Incomplete</button>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Type</label>
                            <div class="grid grid-cols-3 gap-1 bg-black/30 p-1 rounded-md border border-white/10">
                                <button class="roul-type-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white" data-value="Tower">Tower</button>
                                <button class="roul-type-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white" data-value="Citadel">Citadel</button>
                                <button class="roul-type-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white" data-value="Steeple">Steeple</button>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5 relative">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Area</label>
                            <button id="roul-area-btn" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-1.5 lg:py-2.5 text-[10px] lg:text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                <span class="truncate">All Areas</span>
                                <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">expand_more</span>
                            </button>
                            <div id="roul-area-menu" class="hidden absolute top-full left-0 right-0 mt-1 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col p-2 gap-1 max-h-[300px] overflow-y-auto custom-scrollbar">
                                <div id="roul-area-list" class="flex flex-col gap-1"></div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1.5 relative">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Length</label>
                            <button id="roul-len-btn" class="w-full flex justify-between items-center bg-black/30 border border-white/10 rounded-md px-3 py-1.5 lg:py-2.5 text-[10px] lg:text-sm text-gray-300 focus:border-[#BE00FF] hover:bg-white/5 transition-colors text-left group">
                                <span class="truncate">All Lengths</span>
                                <span class="material-symbols-outlined text-sm text-gray-500 group-hover:text-white transition-colors">expand_more</span>
                            </button>
                            <div id="roul-len-menu" class="hidden absolute top-full left-0 right-0 mt-1 bg-[#1C1C22] border border-white/10 rounded-md shadow-2xl z-50 flex flex-col p-2 gap-1 max-h-[300px] overflow-y-auto custom-scrollbar">
                                <div id="roul-len-list" class="flex flex-col gap-1"></div>
                            </div>
                        </div>

                        <div class="mt-4 pt-4 border-t border-white/10">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block">Rotation Pool</label>
                            <div id="roulette-master-list" class="flex flex-col gap-1 overflow-y-auto max-h-[300px] custom-scrollbar bg-black/20 rounded-md p-1 border border-white/5">
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <aside id="ladder-settings-sidebar" class="fixed top-14 bottom-0 right-0 z-50 w-[320px] bg-[#120E1C] lg:bg-transparent transform translate-x-full lg:translate-x-0 transition-transform duration-300 lg:sticky lg:top-0 lg:self-start flex-col gap-3 h-full lg:h-[calc(100vh-80px-12px)] max-h-full p-4 lg:p-0 border-l border-white/10 lg:border-none hidden overflow-y-auto">
                <div class="glass-panel flex-grow rounded-lg p-5 flex flex-col gap-6 overflow-hidden">
                    <div class="flex justify-between items-center border-b border-white/10 pb-3 flex-shrink-0">
                        <h3 class="text-sm font-bold text-white">Ladder Menu</h3>
                        <button id="mobile-close-ladder-settings" class="lg:hidden text-gray-400 hover:text-white"><span class="material-symbols-outlined">close</span></button>
                    </div>

                    <div class="flex-grow overflow-y-auto flex flex-col gap-6 pr-1 custom-scrollbar">
                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Difficulty Mode</label>
                            <div class="grid grid-cols-2 gap-1 bg-black/30 p-1 rounded-md border border-white/10">
                                <button class="ladder-mode-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white border border-[#BE00FF]" data-mode="easy">Easy</button>
                                <button class="ladder-mode-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-white/5 text-gray-400 border border-white/5" data-mode="medium">Medium</button>
                                <button class="ladder-mode-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-white/5 text-gray-400 border border-white/5" data-mode="hard">Hard</button>
                                <button class="ladder-mode-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-white/5 text-gray-400 border border-white/5" data-mode="impossible">Impossible</button>
                            </div>
                            <p id="ladder-mode-desc" class="text-[10px] text-gray-500 mt-1 min-h-[2.5em] leading-tight px-1">Random towers. Difficulty displayed.</p>
                        </div>

                        <div class="flex flex-col gap-1.5">
                            <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Tower Count</label>
                            <div class="grid grid-cols-3 gap-1 bg-black/30 p-1 rounded-md border border-white/10">
                                <button class="ladder-count-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-[#BE00FF] text-white border border-[#BE00FF]" data-count="3">3</button>
                                <button class="ladder-count-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-white/5 text-gray-400 border border-white/5" data-count="5">5</button>
                                <button class="ladder-count-btn px-2 py-1.5 lg:py-1.5 text-[10px] lg:text-xs font-bold rounded transition-all bg-white/5 text-gray-400 border border-white/5" data-count="7">7</button>
                            </div>
                        </div>

                        <div class="pt-2">
                            <button id="ladder-apply-settings" class="w-full px-4 py-2.5 bg-white/10 hover:bg-white/20 text-white font-bold rounded-md transition-colors text-xs uppercase tracking-wider">
                                Restart Game
                            </button>
                        </div>

                        <div class="border-t border-white/10 my-2"></div>

                        <div class="grid grid-cols-1 gap-2">
                            <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                                <p class="text-xs font-medium leading-normal text-gray-400">Games Played</p>
                                <p id="ladder-stat-played" class="text-xl font-bold text-white">0</p>
                            </div>
                            <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                                <p class="text-xs font-medium leading-normal text-gray-400">Highest Streak</p>
                                <p id="ladder-stat-best" class="text-xl font-bold text-[#FFD700]">0</p>
                            </div>
                            <div class="flex flex-col gap-0.5 rounded-md p-2 bg-black/20">
                                <p class="text-xs font-medium leading-normal text-gray-400">Current Streak</p>
                                <p id="ladder-stat-current" class="text-xl font-bold text-white">0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </main>
    </div>
    
    <div id="notification-container" class="notification-container"></div>
    <div id="tower-modal-backdrop" class="modal-backdrop hidden"><div id="tower-modal-panel" class="glass-panel modal-panel"><div class="flex justify-between items-center border-b border-white/10 pb-2 mb-4"><h2 id="modal-tower-name" class="text-xl font-bold"></h2><button id="modal-close-button" class="text-gray-400 hover:text-white transition-colors"><span class="material-symbols-outlined">close</span></button></div><div class="space-y-3 text-sm"><div class="flex justify-between items-center"><span class="text-gray-400">Difficulty:</span><span id="modal-difficulty"></span></div><div class="flex justify-between items-center"><span class="text-gray-400">Length:</span><span id="modal-length"></span></div><div class="flex justify-between items-center"><span class="text-gray-400">Floors:</span><span id="modal-floors"></span></div><div class="flex justify-between items-center"><span class="text-gray-400">Creator(s):</span><div id="modal-creator" class="flex flex-wrap justify-end items-center gap-2"></div></div><div class="flex justify-between items-center"><span class="text-gray-400">Warnings:</span><div id="modal-warnings" class="flex flex-wrap justify-end items-center gap-2"></div></div><div class="flex justify-between items-center"><span class="text-gray-400">Area:</span><span id="modal-area"></span></div><div class="flex justify-between items-center"><span class="text-gray-400">Date Completed:</span><span id="modal-date"></span></div></div></div></div>
    <div id="profile-modal-backdrop" class="modal-backdrop hidden"><div id="profile-modal-panel" class="glass-panel modal-panel max-w-2xl w-full p-6 relative overflow-hidden"><button id="profile-close-button" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-20"><span class="material-symbols-outlined">close</span></button><div class="flex flex-col md:flex-row gap-6 pt-2"><div class="flex-shrink-0 flex flex-col items-center"><div class="w-40 h-40 rounded-lg bg-black/40 border border-white/10 overflow-hidden shadow-2xl relative"><img id="profile-avatar-full" src="" alt="Avatar" class="w-full h-full object-cover object-top hidden"><div id="profile-avatar-loader" class="absolute inset-0 flex items-center justify-center text-gray-600"><span class="material-symbols-outlined animate-spin">sync</span></div></div><div class="mt-3 text-center"><h2 id="profile-display-name" class="text-xl font-bold text-white leading-tight"></h2><p id="profile-username" class="text-sm text-gray-400 font-mono"></p></div><div id="profile-rank-badge" class="mt-3 px-3 py-1 rounded-full border text-xs font-bold bg-black/40">Rank</div></div><div class="flex-grow flex flex-col gap-4"><h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider border-b border-white/10 pb-1">Career Statistics</h3><div class="grid grid-cols-2 gap-3"><div class="bg-black/20 rounded p-3 border border-white/5"><p class="text-xs text-gray-500 uppercase">Total Completions</p><p id="profile-total-count" class="text-lg font-bold text-white">0</p></div><div class="bg-black/20 rounded p-3 border border-white/5"><p class="text-xs text-gray-500 uppercase">Completion %</p><p id="profile-completion-pct" class="text-lg font-bold text-white">0%</p></div><div class="bg-black/20 rounded p-3 border border-white/5 col-span-2"><p class="text-xs text-gray-500 uppercase">Hardest Completion</p><p id="profile-hardest-name" class="text-sm font-bold truncate">None</p><p id="profile-hardest-diff" class="text-xs text-gray-400">N/A</p></div><div class="bg-black/20 rounded p-3 border border-white/5"><p class="text-xs text-gray-500 uppercase">Total Difficulty</p><p id="profile-total-diff" class="text-lg font-bold text-white">0.00</p></div><div class="bg-black/20 rounded p-3 border border-white/5"><p class="text-xs text-gray-500 uppercase">Avg Difficulty</p><p id="profile-avg-diff" class="text-lg font-bold text-white">0.00</p></div></div><div class="grid grid-cols-3 gap-2 text-center mt-1"><div class="bg-black/20 rounded p-2 border border-white/5"><span class="material-symbols-outlined text-gray-500 text-lg block">location_city</span><span id="profile-count-towers" class="text-xs font-bold">0</span><span class="text-[10px] text-gray-500 block">Towers</span></div><div class="bg-black/20 rounded p-2 border border-white/5"><span class="material-symbols-outlined text-gray-500 text-lg block">fort</span><span id="profile-count-citadels" class="text-xs font-bold">0</span><span class="text-[10px] text-gray-500 block">Citadels</span></div><div class="bg-black/20 rounded p-2 border border-white/5"><span class="material-symbols-outlined text-gray-500 text-lg block">church</span><span id="profile-count-steeples" class="text-xs font-bold">0</span><span class="text-[10px] text-gray-500 block">Steeples</span></div></div></div></div></div></div>

    <script type="module" src="./js/main.js?v=1.9.1"></script>
</body>
</html>